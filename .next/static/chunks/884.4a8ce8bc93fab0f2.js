"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[884],{3884:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(7876),i=n(4232);function r(e){let{defaultAmount:t=100,itemName:n="Scend Tool Access (2 hours)",tool:r="LoanTool",mode:a="sandbox"}=e,[d,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[p,g]=(0,i.useState)(null),[f,y]=(0,i.useState)(null),m=async()=>{c(""),l(!0);try{let e=await fetch("/api/payfast/sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,item_name:n,item_description:"".concat(r," access for 2 hours"),custom_str1:r,mode:a})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to sign");h(s.endpoint),g(s.post),y(s.debug||null)}catch(e){c(e.message)}finally{l(!1)}};return(0,s.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,s.jsxs)("div",{style:{fontSize:12,opacity:.8},children:["Mode: ","sandbox"===a?"Sandbox":"Live"]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,s.jsx)("button",{disabled:d,onClick:m,children:"1) Generate signature"}),(0,s.jsx)("button",{disabled:!p,onClick:()=>{if(!p||!u)return;let e=document.createElement("form");e.method="POST",e.action=u,Object.entries(p).forEach(t=>{let[n,s]=t,i=document.createElement("input");i.type="hidden",i.name=n,i.value=String(s),e.appendChild(i)}),document.body.appendChild(e),e.submit()},children:"2) Continue to Payfast"})]}),p&&(0,s.jsxs)("div",{style:{fontSize:12,wordBreak:"break-all"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Signature:"})," ",p.signature]}),(0,s.jsxs)("details",{style:{marginTop:8},children:[(0,s.jsx)("summary",{children:"Fields being posted"}),(0,s.jsx)("pre",{style:{padding:8,background:"#f3f3f3",borderRadius:6},children:JSON.stringify(p,null,2)})]}),(null==f?void 0:f.sigString)&&(0,s.jsxs)("details",{style:{marginTop:8},children:[(0,s.jsx)("summary",{children:"Signature string (server)"}),(0,s.jsx)("pre",{style:{padding:8,background:"#f9f9f9",borderRadius:6},children:f.sigString})]})]}),o&&(0,s.jsx)("div",{style:{color:"#c00",fontSize:13},children:o})]})}}}]);