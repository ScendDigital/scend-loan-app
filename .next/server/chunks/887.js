"use strict";exports.id=887,exports.ids=[887],exports.modules={887:(a,b,c)=>{c.r(b),c.d(b,{default:()=>f});var d=c(8732),e=c(2015);function f({defaultAmount:a=100,itemName:b="Scend Tool Access (2 hours)",tool:c="LoanTool",mode:f="sandbox"}){let[g,h]=(0,e.useState)(!1),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(""),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),q=async()=>{j(""),h(!0);try{let d=await fetch("/api/payfast/sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:a,item_name:b,item_description:`${c} access for 2 hours`,custom_str1:c,mode:f})}),e=await d.json();if(!d.ok)throw Error(e.error||"Failed to sign");l(e.endpoint),n(e.post),p(e.debug||null)}catch(a){j(a.message)}finally{h(!1)}};return(0,d.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,d.jsxs)("div",{style:{fontSize:12,opacity:.8},children:["Mode: ","sandbox"===f?"Sandbox":"Live"]}),(0,d.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,d.jsx)("button",{disabled:g,onClick:q,children:"1) Generate signature"}),(0,d.jsx)("button",{disabled:!m,onClick:()=>{if(!m||!k)return;let a=document.createElement("form");a.method="POST",a.action=k,Object.entries(m).forEach(([b,c])=>{let d=document.createElement("input");d.type="hidden",d.name=b,d.value=String(c),a.appendChild(d)}),document.body.appendChild(a),a.submit()},children:"2) Continue to Payfast"})]}),m&&(0,d.jsxs)("div",{style:{fontSize:12,wordBreak:"break-all"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Signature:"})," ",m.signature]}),(0,d.jsxs)("details",{style:{marginTop:8},children:[(0,d.jsx)("summary",{children:"Fields being posted"}),(0,d.jsx)("pre",{style:{padding:8,background:"#f3f3f3",borderRadius:6},children:JSON.stringify(m,null,2)})]}),o?.sigString&&(0,d.jsxs)("details",{style:{marginTop:8},children:[(0,d.jsx)("summary",{children:"Signature string (server)"}),(0,d.jsx)("pre",{style:{padding:8,background:"#f9f9f9",borderRadius:6},children:o.sigString})]})]}),i&&(0,d.jsx)("div",{style:{color:"#c00",fontSize:13},children:i})]})}}};